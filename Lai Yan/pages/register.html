<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Register for Singapore Hawker Centre Management System">
    <title>Register - Hawker Centre System</title>
    
    <!-- External CSS -->
    <link rel="stylesheet" href="../css/global.css">
    <link rel="stylesheet" href="../css/login.css">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <div class="header">
            <button class="back-btn" onclick="window.location.href='login.html'" aria-label="Go back to login">←</button>
            <div class="header-text">
                <h1>Create Account</h1>
                <p>Join Hawker Centre System</p>
            </div>
        </div>

        <!-- Registration Container -->
        <div class="login-container">
            <!-- Role Display -->
            <div class="role-display" id="role-display">Loading...</div>

            <!-- Registration Form -->
            <form id="registerForm" novalidate>
                <div class="form-group">
                    <label for="name">Full Name</label>
                    <input 
                        type="text" 
                        id="name"
                        name="name"
                        required 
                        placeholder="Enter your full name"
                        autocomplete="name"
                        aria-required="true"
                    />
                </div>

                <div class="form-group">
                    <label for="email">Email Address</label>
                    <input 
                        type="email" 
                        id="email"
                        name="email"
                        required 
                        placeholder="Enter your email"
                        autocomplete="email"
                        aria-required="true"
                    />
                </div>

                <div class="form-group">
                    <label for="password">Password</label>
                    <input 
                        type="password" 
                        id="password"
                        name="password"
                        required 
                        placeholder="Create a password"
                        autocomplete="new-password"
                        minlength="6"
                        aria-required="true"
                        aria-describedby="password-hint"
                    />
                    <p class="password-hint" id="password-hint">Minimum 6 characters</p>
                </div>

                <div class="form-group">
                    <label for="confirmPassword">Confirm Password</label>
                    <input 
                        type="password" 
                        id="confirmPassword"
                        name="confirmPassword"
                        required 
                        placeholder="Re-enter your password"
                        autocomplete="new-password"
                        minlength="6"
                        aria-required="true"
                    />
                </div>

                <button type="submit" class="btn-primary">Create Account</button>
                <div id="error-message" class="error-message" role="alert" aria-live="polite"></div>
            </form>

            <!-- Login Link -->
            <p class="register-link">
                Already have an account? 
                <a href="login.html">Login here</a>
            </p>

            <!-- Back Link -->
            <a href="../index.html" class="back-link">← Change Role</a>
        </div>
    </div>

    <!-- Display selected role -->
    <script>
        /**
         * Initialize registration page
         * Displays the selected role from session storage
         */
        (function initializeRegisterPage() {
            const selectedRole = sessionStorage.getItem('selectedRole') || 'customer';
            const roleDisplay = document.getElementById('role-display');
            
            if (roleDisplay) {
                const roleText = selectedRole.charAt(0).toUpperCase() + selectedRole.slice(1);
                roleDisplay.textContent = `Registering as: ${roleText}`;
            }
        })();
    </script>

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

    <!-- Application JavaScript -->
    <script src="../js/firebase-config.js"></script>
    <script src="../js/auth.js"></script>
</body>
</html>
