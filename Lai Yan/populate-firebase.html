<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Populate Firebase Database</title>
</head>
<body>
    <h1>Firebase Database Setup</h1>
    <button id="populateBtn" style="padding: 15px 30px; background: #5dbb91; color: white; border: none; border-radius: 10px; font-size: 16px; cursor: pointer;">
        Click to Populate Hawker Centres & Stalls
    </button>
    <div id="status" style="margin-top: 20px; font-family: monospace;"></div>

    <!-- Firebase SDKs-->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    
    <!-- Firebase Config - Initialize Firebase -->
    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyB5pd5cJ88oj_Otwew2X_byVKBb6FTUuHA",
            authDomain: "fed-asg-1.firebaseapp.com",
            projectId: "fed-asg-1",
            storageBucket: "fed-asg-1.firebasestorage.app",
            messagingSenderId: "405182077180",
            appId: "1:405182077180:web:ad9bea1328ad19c90f9f79"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        
        console.log('Firebase initialized successfully');
    </script>

    <!-- Populate Script -->
    <script>
        const statusDiv = document.getElementById('status');
        
        // Hawker Centres Data 
        const hawkerCentres = [
            { id: 'HC001', name: 'Jurong West 493 Market & Food Centre', address: 'Blk 493 Jurong West Street 41', operatorId: 'OP001', operatorName: 'Kopitiam Management Pte Ltd' },
            { id: 'HC002', name: 'Clementi 448 Market & Food Centre', address: 'Blk 448 Clementi Avenue 3', operatorId: 'OP002', operatorName: 'Foodie Plaza Pte Ltd' },
            { id: 'HC003', name: 'Ang Mo Kio 226 Market & Food Centre', address: 'Blk 226 Ang Mo Kio Avenue 1', operatorId: 'OP003', operatorName: 'Hawker Hub Pte Ltd' },
            { id: 'HC004', name: 'Bedok 538 Market & Food Centre', address: 'Blk 538 Bedok North Street 3', operatorId: 'OP001', operatorName: 'Kopitiam Management Pte Ltd' },
            { id: 'HC005', name: 'Toa Payoh 127 Market & Food Centre', address: 'Blk 127 Lorong 1 Toa Payoh', operatorId: 'OP002', operatorName: 'Foodie Plaza Pte Ltd' }
        ];

        // Food Stalls Data 
        const stalls = [
            { id: 'ST001', unitNo: '01-01', name: 'Ah Huat Chicken Rice', desc: 'Traditional Hainanese chicken rice with aromatic rice and tender chicken', hawkerId: 'HC001', hawkerName: 'Jurong West 493 Market & Food Centre' },
            { id: 'ST002', unitNo: '01-02', name: 'Roti Prata Corner', desc: 'Crispy and fluffy roti prata with various curry dips', hawkerId: 'HC001', hawkerName: 'Jurong West 493 Market & Food Centre' },
            { id: 'ST003', unitNo: '01-03', name: 'Laksa Delight', desc: 'Rich and creamy coconut-based laksa with fresh ingredients', hawkerId: 'HC001', hawkerName: 'Jurong West 493 Market & Food Centre' },
            { id: 'ST004', unitNo: '01-04', name: 'Nasi Lemak Express', desc: 'Fragrant coconut rice with sambal and crispy fried chicken', hawkerId: 'HC001', hawkerName: 'Jurong West 493 Market & Food Centre' },
            { id: 'ST005', unitNo: '01-05', name: 'Char Kway Teow Master', desc: 'Smoky wok-fried flat rice noodles with seafood and lap cheong', hawkerId: 'HC001', hawkerName: 'Jurong West 493 Market & Food Centre' },
            
            { id: 'ST006', unitNo: '01-01', name: 'Bak Chor Mee House', desc: 'Minced meat noodles with mushrooms and meatballs', hawkerId: 'HC002', hawkerName: 'Clementi 448 Market & Food Centre' },
            { id: 'ST007', unitNo: '01-02', name: 'Hokkien Prawn Mee Stall', desc: 'Stir-fried prawn noodles with rich seafood broth', hawkerId: 'HC002', hawkerName: 'Clementi 448 Market & Food Centre' },
            { id: 'ST008', unitNo: '01-03', name: 'Satay Corner', desc: 'Grilled meat skewers with peanut sauce and rice cakes', hawkerId: 'HC002', hawkerName: 'Clementi 448 Market & Food Centre' },
            { id: 'ST009', unitNo: '01-04', name: 'Carrot Cake Specialist', desc: 'Fried radish cake available in black or white sauce', hawkerId: 'HC002', hawkerName: 'Clementi 448 Market & Food Centre' },
            { id: 'ST010', unitNo: '01-05', name: 'Mee Goreng Station', desc: 'Spicy fried yellow noodles with vegetables and seafood', hawkerId: 'HC002', hawkerName: 'Clementi 448 Market & Food Centre' },
            
            { id: 'ST011', unitNo: '01-01', name: 'Yong Tau Foo Express', desc: 'Assorted stuffed tofu and vegetables in clear soup or dry', hawkerId: 'HC003', hawkerName: 'Ang Mo Kio 226 Market & Food Centre' },
            { id: 'ST012', unitNo: '01-02', name: 'Rojak Paradise', desc: 'Fruit and vegetable salad with sweet and spicy sauce', hawkerId: 'HC003', hawkerName: 'Ang Mo Kio 226 Market & Food Centre' },
            { id: 'ST013', unitNo: '01-03', name: 'Fish Ball Noodle King', desc: 'Handmade fish balls with springy noodles in clear soup', hawkerId: 'HC003', hawkerName: 'Ang Mo Kio 226 Market & Food Centre' },
            { id: 'ST014', unitNo: '01-04', name: 'Chicken Cutlet Rice', desc: 'Crispy fried chicken cutlet served with fragrant rice', hawkerId: 'HC003', hawkerName: 'Ang Mo Kio 226 Market & Food Centre' },
            { id: 'ST015', unitNo: '01-05', name: 'Wanton Mee Specialist', desc: 'Springy egg noodles with dumpling soup and char siew', hawkerId: 'HC003', hawkerName: 'Ang Mo Kio 226 Market & Food Centre' },
            
            { id: 'ST016', unitNo: '01-01', name: 'Economic Rice Stall', desc: 'Choose from variety of dishes served with rice', hawkerId: 'HC004', hawkerName: 'Bedok 538 Market & Food Centre' },
            { id: 'ST017', unitNo: '01-02', name: 'Duck Rice House', desc: 'Tender braised duck served with fragrant rice', hawkerId: 'HC004', hawkerName: 'Bedok 538 Market & Food Centre' },
            { id: 'ST018', unitNo: '01-03', name: 'Fried Kway Teow Stall', desc: 'Charcoal-fried flat rice noodles with lap cheong and fishcake', hawkerId: 'HC004', hawkerName: 'Bedok 538 Market & Food Centre' },
            { id: 'ST019', unitNo: '01-04', name: 'Lor Mee Corner', desc: 'Thick gravy noodles with braised pork and fried fish', hawkerId: 'HC004', hawkerName: 'Bedok 538 Market & Food Centre' },
            { id: 'ST020', unitNo: '01-05', name: 'Popiah Delight', desc: 'Fresh spring rolls with turnip and sweet sauce', hawkerId: 'HC004', hawkerName: 'Bedok 538 Market & Food Centre' },
            
            { id: 'ST021', unitNo: '01-01', name: 'Ban Mian House', desc: 'Hand made noodles in anchovy soup with minced meat', hawkerId: 'HC005', hawkerName: 'Toa Payoh 127 Market & Food Centre' },
            { id: 'ST022', unitNo: '01-02', name: 'Porridge Station', desc: 'Smooth rice porridge with various toppings', hawkerId: 'HC005', hawkerName: 'Toa Payoh 127 Market & Food Centre' },
            { id: 'ST023', unitNo: '01-03', name: 'Oyster Omelette Stall', desc: 'Crispy egg omelette with fresh oysters', hawkerId: 'HC005', hawkerName: 'Toa Payoh 127 Market & Food Centre' },
            { id: 'ST024', unitNo: '01-04', name: 'Soon Kueh Corner', desc: 'Steamed rice dumplings with turnip and bamboo shoots', hawkerId: 'HC005', hawkerName: 'Toa Payoh 127 Market & Food Centre' }
        ];

        document.getElementById('populateBtn').addEventListener('click', async () => {
            statusDiv.innerHTML = '<p style="color: #5dbb91;">Starting...</p>';
            
            try {
                // Add Hawker Centres
                statusDiv.innerHTML += '<p>Adding hawker centres...</p>';
                for (const hc of hawkerCentres) {
                    await db.collection('hawkerCentres').doc(hc.id).set({
                        hawkerCentreId: hc.id,
                        name: hc.name,
                        address: hc.address,
                        operatorId: hc.operatorId,
                        operatorName: hc.operatorName
                    });
                    statusDiv.innerHTML += `<p style="color: green;">✓ Added: ${hc.name}</p>`;
                }

                // Add Stalls
                statusDiv.innerHTML += '<p>Adding stalls...</p>';
                for (const stall of stalls) {
                    await db.collection('stalls').doc(stall.id).set({
                        stallId: stall.id,
                        stallUnitNo: stall.unitNo,
                        stallName: stall.name,
                        stallDesc: stall.desc,
                        hawkerCentreId: stall.hawkerId,
                        hawkerCentreName: stall.hawkerName,
                        assigned: false,
                        vendorId: null,
                        vendorName: null
                    });
                    statusDiv.innerHTML += `<p style="color: green;">✓ Added: ${stall.name}</p>`;
                }

                statusDiv.innerHTML += '<p style="color: #5dbb91; font-weight: bold; font-size: 18px;">✓ COMPLETE! All data added to Firebase.</p>';
                statusDiv.innerHTML += '<p>You can now close this file and delete it.</p>';
                
            } catch (error) {
                console.error(error);
                statusDiv.innerHTML += `<p style="color: red;">ERROR: ${error.message}</p>`;
            }
        });
    </script>
</body>
</html>